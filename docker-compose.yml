version: '3.8'

services:
  ftp-server:
    build: ./ftp
    container_name: ftp-server
    ports:
      - "21:21"
      - "21000-21010:21000-21010"
    volumes:
      - shared-data:/home/ftpuser/uploads
    environment:
      FTP_USER: ftpuser
      FTP_PASS: ftppass

  node-app:
    build: ./app
    container_name: file-watcher
    volumes:
      - shared-data:/uploads
    depends_on:
      - ftp-server

volumes:
  shared-data:
